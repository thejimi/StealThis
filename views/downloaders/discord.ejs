<html lang="en">
<head>
    <%- include('../head.ejs') %>
    <title>StealThis - Discord</title>

    <script>
      tailwind.config = {
  darkMode: 'class',
  theme: {
    extend: {
      colors: {
        primary: {"50":"#eef2ff","100":"#e0e7ff","200":"#c7d2fe","300":"#a5b4fc","400":"#818cf8","500":"#6366f1","600":"#4f46e5","700":"#4338ca","800":"#3730a3","900":"#312e81","950":"#1e1b4b"}
      }
    },
    fontFamily: {
      'body': [
    'Open Sans', 
    'ui-sans-serif', 
    'system-ui', 
    '-apple-system', 
    'system-ui', 
    'Segoe UI', 
    'Roboto', 
    'Helvetica Neue', 
    'Arial', 
    'Noto Sans', 
    'sans-serif', 
    'Apple Color Emoji', 
    'Segoe UI Emoji', 
    'Segoe UI Symbol', 
    'Noto Color Emoji'
  ],
      'sans': [
    'Open Sans', 
    'ui-sans-serif', 
    'system-ui', 
    '-apple-system', 
    'system-ui', 
    'Segoe UI', 
    'Roboto', 
    'Helvetica Neue', 
    'Arial', 
    'Noto Sans', 
    'sans-serif', 
    'Apple Color Emoji', 
    'Segoe UI Emoji', 
    'Segoe UI Symbol', 
    'Noto Color Emoji'
  ]
    }
  }
}
    </script>

<meta property="og:title" content="Discord Avatar & Banner Downloader" />
<meta property="og:description" content="Lookup any user's avatar & banner, with full size quality." />
<meta property="og:image" content="http://localhost:3000/favicon" />

</head>
<body>
    <%- include('../navbar.ejs') %>

    <section class="bg-white dark:bg-stone-900">
        <div class="pt-8 px-4 mx-auto max-w-screen-xl text-center lg:pt-16 lg:px-12">
            <a href="./guide" class="inline-flex justify-between items-center py-1 px-1 pr-4 mb-7 text-sm text-stone-700 bg-stone-100 rounded-full dark:bg-stone-800 dark:text-white hover:bg-stone-200 dark:hover:bg-stone-700" role="alert">
                <span class="text-xs bg-primary-600 rounded-full text-white px-4 py-1.5 mr-3">üåê</span> <span class="text-sm font-medium">Join our Discord server</span> 
                <svg class="ml-2 w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg>
            </a>
            <h1 class="mb-4 text-4xl font-extrabold tracking-tight leading-none text-stone-900 md:text-5xl lg:text-6xl dark:text-white">Discord</h1>
            <p class="mb-8 text-lg font-normal text-stone-500 lg:text-xl sm:px-16 xl:px-48 dark:text-stone-400">Lookup any user's avatar & banner, with full size quality.</p>
           <div class="inline-flex w-full">
            <input type="text" id="id" placeholder="Enter user's ID - not username" class="block  mt-2 w-full aceholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-primary-400 focus:outline-none focus:ring focus:ring-primary-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-primary-300" />
            <button onclick="lookup()" class="ml-2 w-auto px-5 py-2.5 text-sm tracking-wide text-white transition-colors duration-200 bg-primary-500 rounded-lg shrink-0 hover:bg-primary-600 dark:hover:bg-primary-500 dark:bg-primary-600">
                Lookup
            </button>
           </div>
        </div>
    </section>

    <section class="py-8 bg-white md:py-16 dark:bg-gray-900 antialiased hidden" id="results">
      <div class="max-w-screen-xl px-4 mx-auto 2xl:px-0">
        <div class="lg:grid lg:grid-cols-2 lg:gap-8 xl:gap-16">
          <div class="shrink-0 max-w-md lg:max-w-lg mx-auto">
              <img onerror="this.src = this.src.replace('gif', 'png');" class="w-auto h-96" id="img1" style="border-radius:30px" alt="" />
              <img onerror="this.src = this.src.replace('gif', 'png');" class="w-full mt-4 h-auto" id="img2" style="border-radius:30px" alt="" />
            </div>

          <div class="mt-6 sm:mt-8 lg:mt-0">
            <h1
              class="text-2xl font-semibold text-gray-900 sm:text-3xl dark:text-white"
              id="globalName"
            >
            ...
            </h1>
            <div class="mt-4 sm:items-center sm:gap-4 sm:flex">
              <h1
              class="text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white"
              id="username"
            >
              ...
            </h1>
            </div>
            <hr class="my-6 md:my-8 border-gray-200 dark:border-gray-800" />
            <a
                href=""
                title=""
                class="mt-2 flex items-center justify-center py-2.5 px-5 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-primary-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"
                role="button"
                id="avatar_png"
                target="_blank"
              >
              Download avatar as&nbsp;<strong>png</strong>
              </a>
              <a
                href=""
                title=""
                class="mt-2 flex items-center justify-center py-2.5 px-5 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-primary-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"
                role="button"
                target="_blank"
                id="avatar_gif"
              >
              Download avatar as&nbsp;<strong>gif</strong>
              </a>
              <hr class="my-6 md:my-8 border-gray-200 dark:border-gray-800" />
            <a
                href=""
                title=""
                class="mt-2 flex items-center justify-center py-2.5 px-5 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-primary-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"
                role="button"
                target="_blank"
                id="banner_png"
              >
              Download banner as&nbsp;<strong>png</strong>
              </a>
              <a
                href=""
                title=""
                class="mt-2 flex items-center justify-center py-2.5 px-5 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-primary-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"
                role="button"
                target="_blank"
                id="banner_gif"
              >
              Download banner as&nbsp;<strong>gif</strong>
              </a>
          </div>
        </div>
      </div>
    </section>

    <%- include('../options.ejs') %>
</body>

<script>
    function lookup(){
        var id = document.getElementById('id').value

        if(!id) {
          return alert("Please enter an ID")
        }

        fetch(`http://localhost:3000/api/discord_user/${id}`)
        .then(res => res.json())
        .then(data => {
          console.log(data)
          document.getElementById('results').classList.remove('hidden')
          document.getElementById('img1').src = `https://cdn.discordapp.com/avatars/${data.id}/${data.avatar}.gif?size=1024`
          document.getElementById('globalName').innerHTML = `${data.global_name||data.username}`
          document.getElementById('username').innerHTML = `@${data.username}`
          document.getElementById('img2').src = `https://cdn.discordapp.com/banners/${data.id}/${data.banner}.gif?size=1024`

          document.getElementById('avatar_png').href = `https://cdn.discordapp.com/avatars/${data.id}/${data.avatar}.png?size=1024`
          document.getElementById('avatar_gif').href = `https://cdn.discordapp.com/avatars/${data.id}/${data.avatar}.gif?size=1024`
          
          if(data.bot === true){
            document.getElementById('globalName').innerHTML = `${data.global_name||data.username} <span class="text-primary-500">BOT</span>`
          }

          if(data.banner){
            document.getElementById('banner_png').href = `https://cdn.discordapp.com/avatars/${data.id}/${data.banner}.png?size=1024`
            document.getElementById('banner_gif').href = `https://cdn.discordapp.com/avatars/${data.id}/${data.banner}.gif?size=1024`
          } else {
            document.getElementById('banner_png').classList.add('hidden')
            document.getElementById('banner_gif').classList.add('hidden')
            document.getElementById('img2').classList.add('hidden')
          }
        })
    }

    const isValidUrl = urlString=> {
  var urlPattern = new RegExp('^(https?:\\/\\/)?'+ // validate protocol
'((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // validate domain name
'((\\d{1,3}\\.){3}\\d{1,3}))'+ // validate OR ip (v4) address
'(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // validate port and path
'(\\?[;&a-z\\d%_.~+=-]*)?'+ // validate query string
'(\\#[-a-z\\d_]*)?$','i'); // validate fragment locator
return !!urlPattern.test(urlString);
}
</script>
</html>