<html lang="en">
<head>
    <%- include('../head.ejs') %>
    <title>StealThis - TikTok</title>

    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              primary: {"50":"#fdf4ff","100":"#fae8ff","200":"#f5d0fe","300":"#f0abfc","400":"#e879f9","500":"#d946ef","600":"#c026d3","700":"#a21caf","800":"#86198f","900":"#701a75","950":"#4a044e"}
            }
          },
          fontFamily: {
            'body': [
          'Open Sans', 
          'ui-sans-serif', 
          'system-ui', 
          '-apple-system', 
          'system-ui', 
          'Segoe UI', 
          'Roboto', 
          'Helvetica Neue', 
          'Arial', 
          'Noto Sans', 
          'sans-serif', 
          'Apple Color Emoji', 
          'Segoe UI Emoji', 
          'Segoe UI Symbol', 
          'Noto Color Emoji'
        ],
            'sans': [
          'Open Sans', 
          'ui-sans-serif', 
          'system-ui', 
          '-apple-system', 
          'system-ui', 
          'Segoe UI', 
          'Roboto', 
          'Helvetica Neue', 
          'Arial', 
          'Noto Sans', 
          'sans-serif', 
          'Apple Color Emoji', 
          'Segoe UI Emoji', 
          'Segoe UI Symbol', 
          'Noto Color Emoji'
        ]
          }
        }
      }
          </script>

<meta property="og:title" content="TikTok Downloader" />
<meta property="og:description" content="Download TikToks without watermark - for free, without ads." />
<meta property="og:image" content="http://192.168.0.41:3000/favicon" />

</head>
<body>
    <%- include('../navbar.ejs') %>

    <section class="bg-white dark:bg-stone-900">
        <div class="pt-8 px-4 mx-auto max-w-screen-xl text-center lg:pt-16 lg:px-12">
            <a href="./guide" class="inline-flex justify-between items-center py-1 px-1 pr-4 mb-7 text-sm text-stone-700 bg-stone-100 rounded-full dark:bg-stone-800 dark:text-white hover:bg-stone-200 dark:hover:bg-stone-700" role="alert">
                <span class="text-xs bg-primary-600 rounded-full text-white px-4 py-1.5 mr-3">ðŸ‘‹</span> <span class="text-sm font-medium">See how you can download videos even faster</span> 
                <svg class="ml-2 w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg>
            </a>
            <h1 class="mb-4 text-4xl font-extrabold tracking-tight leading-none text-stone-900 md:text-5xl lg:text-6xl dark:text-white">TikTok</h1>
            <p class="mb-8 text-lg font-normal text-stone-500 lg:text-xl sm:px-16 xl:px-48 dark:text-stone-400">Download TikToks without watermark - for free, without ads.</p>
           <div class="inline-flex w-full">
            <input type="url" id="url" placeholder="Enter a tiktok.com link" class="block  mt-2 w-full aceholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-primary-400 focus:outline-none focus:ring focus:ring-primary-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-primary-300" />
            <button onclick="download()" class="ml-2 w-auto px-5 py-2.5 text-sm tracking-wide text-white transition-colors duration-200 bg-primary-500 rounded-lg shrink-0 hover:bg-primary-600 dark:hover:bg-primary-500 dark:bg-primary-600">
                Download
            </button>
           </div>
        </div>
    </section>

    <%- include('../options.ejs') %>
</body>

<script>
    function download(){
        var url = document.getElementById("url").value

        if(!url){
            return alert("Please enter a link")
        }

        if(!url.includes('tiktok.com')){
            return alert("It must be a tiktok.com link")
        }

        if(url.includes('vt') || url.includes('vm')){
            
        } else {
          if(url.includes('photo')){
            return alert("Sorry, but we don't support slideshow tiktoks yet.")
          }

          window.location.href = (`${url.replace('https://www.tiktok.com/', 'http://192.168.0.41:3000/')}`)
        }
    }

    const isValidUrl = urlString=> {
  var urlPattern = new RegExp('^(https?:\\/\\/)?'+ // validate protocol
'((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // validate domain name
'((\\d{1,3}\\.){3}\\d{1,3}))'+ // validate OR ip (v4) address
'(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // validate port and path
'(\\?[;&a-z\\d%_.~+=-]*)?'+ // validate query string
'(\\#[-a-z\\d_]*)?$','i'); // validate fragment locator
return !!urlPattern.test(urlString);
}
</script>
</html>